<div class="profile-wrapper">
    <div *ngIf="!thing && !notFound" class="waiting">
        <br />
        <div class="preloader-wrapper active">
            <div class="spinner-layer">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="gap-patch">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>
        </div>
        <span><br /><br />Loading...</span>
    </div>

    <h4 class="grey-text center-align" *ngIf="notFound">
        <br />You see nothing.
    </h4>
    <div class="z-depth-1 bkg-white" *ngIf="thing">
        <img class="photo" *ngIf="thing.photo" [src]="getUrl()" />
        <div class="info">
            <h3>{{ thing.name }}
                <span *ngIf="canEdit()">
                    <a class="modal-trigger tooltipped" [attr.data-position]="'bottom'" [attr.data-tooltip]="'Edit details'" href="#editDetailsModal"><i class="material-icons small">edit</i></a>
                    <a class="modal-trigger tooltipped" [attr.data-position]="'bottom'" [attr.data-tooltip]="'Change photo'" href="#setPhotoModal"><i class="material-icons small">aspect_ratio</i></a>
                    <a class="modal-trigger tooltipped" [attr.data-position]="'bottom'" [attr.data-tooltip]="'Add someone as a contact'" href="#addContactModal"><i class="material-icons small">person_add</i></a>
                </span>
            </h3>
            <div *ngIf="thing.contacts.length">
                <h6 class="metadata grey-text">CONTACTS</h6>
                <person-link *ngFor="let contact of thing.contacts" [remove]="canEdit() ? removeCallbackFor(contact) : undefined" [person]="contact.target"></person-link>
            </div>
            <div *ngIf="thing.address">
                <h6 class="metadata grey-text">LOCATION</h6>
                <a href="{{ addressLink() }}" target="_blank">{{ thing.address }}</a>
            </div>
            <h6 class="metadata grey-text">ABOUT</h6>
            <div class="about flow-text" [innerHtml]="thing.about | parseLinks"></div>
            <br />
            <div class="waves-effect waves-light btn white-text teal tooltipped" [attr.data-position]="'bottom'" [attr.data-tooltip]="'You\'ll get updates about ' + thing.name" (click)="toggleFollow()">
                <b *ngIf="!isFollowing">Follow</b>
                <i *ngIf="isFollowing" class="material-icons">check</i>
            </div>
        </div>
        <div class="tabs-anchor">
            <ul class="tabs">
                <li class="tab"><a href="#tab-updates" (click)="selectTab('updates')" class="txt-red"><i class="material-icons">perm_identity</i> Updates</a></li>
                <li *ngIf="thing.offers && thing.offers.length" class="tab"><a href="#tab-offers" (click)="selectTab('offers')" class="active txt-green"><i class="material-icons">redeem</i> Offers</a></li>
                <li *ngIf="thing.projects && thing.projects.length" class="tab"><a href="#tab-projects" (click)="selectTab('projects')" class="deep-orange-text"> <i class="material-icons">settings</i> Projects</a></li>
                <li *ngIf="thing.resources && thing.resources.length" class="tab"><a href="#tab-resources" (click)="selectTab('resources')" class="brown-text"> <i class="material-icons">language</i> Resources</a></li>
                <li *ngIf="thing.hubs && thing.hubs.length" class="tab"><a href="#tab-hubs" (click)="selectTab('hubs')" class="blue-text"><i class="material-icons">room</i> Hubs</a></li>
                <li *ngIf="thing.clubs && thing.clubs.length" class="tab"><a href="#tab-clubs" (click)="selectTab('clubs')" class="orange-text"><i class="material-icons">supervisor_account</i> Clubs</a></li>
                <li *ngIf="thing.people && thing.people.length" class="tab"><a href="#tab-people" (click)="selectTab('people')" class="txt-red"><i class="material-icons">perm_identity</i> People</a></li>
            </ul>
        </div>
    </div>
    <br />
    <div id="tab-updates">
        <div class="center-align" *ngIf="thing && isSignedIn()">
            <a href="#postUpdateModal" class="modal-trigger price waves-effect waves-light btn white-text bkg-red tooltipped" [attr.data-position]="'bottom'" [attr.data-tooltip]="'Post a new update on ' + thing.name">
                <b><i class="material-icons left">edit</i>New Post</b>
            </a>
        </div>
        <thing-updates *ngIf="thing" [updates]="thing.updates"></thing-updates>
    </div>
    <div class="start-hidden" id="tab-offers">
        <offers *ngIf="thing" [list]="thing.offers" [profile]="thing"></offers>
    </div>
    <div class="start-hidden" id="tab-projects">
        <things *ngIf="thing" [things]="thing.projects"></things>
    </div>
    <div class="start-hidden" id="tab-resources">
        <things *ngIf="thing" [things]="thing.resources"></things>
    </div>
    <div class="start-hidden" id="tab-hubs">
        <things *ngIf="thing" [things]="thing.hubs"></things>
    </div>
    <div class="start-hidden" id="tab-people">
        <things *ngIf="thing" [things]="thing.people"></things>
    </div>
    <edit-details-modal *ngIf="canEdit()" [thing]="thing"></edit-details-modal>
    <add-contact-modal *ngIf="canEdit()" [thing]="thing"></add-contact-modal>
    <remove-contact-modal *ngIf="canEdit() && removingContact" [thing]="thing" [contact]="removingContact"></remove-contact-modal>
    <set-photo-modal *ngIf="canEdit()" [thing]="thing"></set-photo-modal>
    <post-update-modal *ngIf="thing" [thing]="thing"></post-update-modal>
</div>

<div class="fixed-action-btn" *ngIf="canEdit()">
    <a href="#addContactModal" class="btn-floating btn-large bkg-red tooltipped" [attr.data-position]="'left'" [attr.data-tooltip]="'Add something'">
        <i class="large material-icons">add</i>
    </a>
    <ul>
        <li><a class="btn-floating purple tooltipped" [attr.data-position]="'left'" [attr.data-tooltip]="'Add a form'"><i class="material-icons">receipt</i></a></li>
        <li><a class="btn-floating orange tooltipped" [attr.data-position]="'left'" [attr.data-tooltip]="'Add a club'"><i class="material-icons">supervisor_account</i></a></li>
        <li><a class="btn-floating blue tooltipped" [attr.data-position]="'left'" [attr.data-tooltip]="'Add a hub'"><i class="material-icons">room</i></a></li>
        <li><a class="btn-floating brown tooltipped" [attr.data-position]="'left'" [attr.data-tooltip]="'Add a resource'"><i class="material-icons">language</i></a></li>
        <li><a class="btn-floating deep-orange tooltipped" [attr.data-position]="'left'" [attr.data-tooltip]="'Add a project'"><i class="material-icons">settings</i></a></li>
        <li><a class="btn-floating bkg-green tooltipped" [attr.data-position]="'left'" [attr.data-tooltip]="'Add an offer'"><i class="material-icons">redeem</i></a></li>
        <li><a class="btn-floating bkg-red tooltipped" [attr.data-position]="'left'" [attr.data-tooltip]="'Add a member'"><i class="material-icons">perm_identity</i></a></li>
    </ul>
</div>