<div class="messagescontainer">
    <div class="row" *ngIf="!haveUserInfor()">
        <br />
        <div class="grey-text text-darken-2 center-align col s6 offset-s3 card-panel">
            <p>
                Sign in to continue.
            </p>
            <signin-required-modal></signin-required-modal>
        </div>
    </div>
    <div class="row mainmessage white z-depth-1 ms-toogle" [ngClass]="{'ms-toogle-on': msToggleOn}" *ngIf="haveUserInfor()">
        <div class="col s12 m4 l3 scroll msrecent" style="position: relative;">
            <div *ngIf="!contacts" class="fill valign-wrapper">
                <div style="margin: auto;" class="valign">
                    <div class="preloader-wrapper active">
                        <div class="spinner-layer">
                            <div class="circle-clipper left">
                                <div class="circle"></div>
                            </div>
                            <div class="gap-patch">
                                <div class="circle"></div>
                            </div>
                            <div class="circle-clipper right">
                                <div class="circle"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="scroll">
                <h3 class="mstitle">Contacts <i class="clickable small material-icons chat-bubble tooltipped" [attr.data-position]="'left'" [attr.data-tooltip]="'Show conversation with ' + messagesWith.firstName" (click)="showChat()">chat_bubble</i></h3>
                <div class="center-align grey-text" *ngIf="contacts && !contacts.length">
                    You haven't started any conversations yet.
                </div>
                <div class="item" [ngClass]="{'current-contact': contact.target.id === idCurrentContact}" *ngFor="let contact of contacts">
                    <a class="message clear" [ngClass]="{'not-seen': !contact.seen}" (click)="getMessagesById(contact)">
                        <a [routerLink]="['/' + contact.target.googleUrl]" >
                            <img class="circle resize imageprofile" src="{{showContactImage(contact, 0)}}"/>
                        </a>
                        <div class="name">
                            {{ showContactImage(contact, 1) }}
                        </div>
                    </a>
                    <div class="divider"></div>
                </div>
            </div>
        </div>
        <div class="col s12 m8 l9 messages">
            <div *ngIf="!messageWithSomeone" class="fill valign-wrapper">
                <div style="margin: auto;" class="valign">
                    <div class="preloader-wrapper active">
                        <div class="spinner-layer">
                            <div class="circle-clipper left">
                                <div class="circle"></div>
                            </div>
                            <div class="gap-patch">
                                <div class="circle"></div>
                            </div>
                            <div class="circle-clipper right">
                                <div class="circle"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h3 class="mstitle">{{ messagesWith.firstName }} {{ messagesWith.lastName }}<i class="clickable small material-icons recent-actors tooltipped" (click)="showRecent()" [attr.data-position]="'left'" [attr.data-tooltip]="'Show recent conversations'">recent_actors</i></h3>
            <div class="row s3 listmessages">
                <div class="content scroll">
                    <div class="scrollpanel">
                        <div class="center-align grey-text" *ngIf="messageWithSomeone && !messageWithSomeone.length">
                            Start your conversation with {{ messagesWith.firstName }} below.
                        </div>
                        <div class="message-item clear scrollspy" *ngFor="let message of messageWithSomeone">
                            <div class="message-name">
                                <div class="clear" [ngClass]="{rightto: !checkIsLeft(message), leftto: checkIsLeft(message)}">
                                    <span class="emessage"> {{showContentMessage(message, 0)}} </span>
                                    <a [routerLink]="['/' + showContentMessage(message, 2)]" >
                                        <img class="circle resize avatar" src="{{showContentMessage(message, 1)}}" />
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row s9 sendmessage">
                <div class="input-field col s12">
                    <div class="divider"></div>
                    <textarea id="icon_prefix2" class="validate materialize-textarea" [(ngModel)]="strMessage" name="strMessage" (keydown.enter)="enterPressed($event)"></textarea>
                    <label class="active" for="icon_prefix2">Message {{ messagesWith.firstName }}...</label>
                    <a class="waves-effect waves-light btn" (click)="sendMessages(strMessage)"><b><i class="material-icons right">done</i>Send</b></a>
                </div>
            </div>
        </div>
    </div>
</div>